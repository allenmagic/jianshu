### 导言

> VaR是目前通用的风险管理技术，适用于计算投资组合在一定置信水平下的损失不超过某值。计算VaR的方法有多种，本文试图介绍常用的蒙特卡洛模拟的方法计算特定投资组合的VaR值。


### 一、VaR的概念

**1.什么是VaR**

VaR是指假设目前的投资组合在未来一段时间冻结，将投资组合的头寸和到期前的不确定风险均考虑在内，有如下定义：

在一定置信水平下，投资组合在未来确定时间的损失不超过某个值，这个值就是VaR值。因此，VaR被一般定义为最小损失，是一个正数。具体的表达式如下：


![](http://latex.codecogs.com/svg.latex?P(L>VaR)\leq1-c)

L是指Loss(即投资组合的损失值)，c是指置信水平（例如95%）。所以公式可以解读为损失值大于VaR的概率不超过5%。

**2.如何计算VaR**

计算VaR的步骤一般如下：

* 逐日盯市确认投资组合的市值，比如1亿人民币。
* 衡量风险因素的变化率，可以根据历史数据计算其波动率。
* 设定时间区域，样本观察时间段，调整交易时间。
* 设定置信水平，例如95%。
* 分析数据，得出收入的分布概率，计算潜在的最大损失，综合得出VaR值

**3.简单的描述VaR**

我们可以用图形来定义VaR的概念，假设投资组合的收益R符合正态分布：
![](http://latex.codecogs.com/svg.latex?R \sim N(\mu,\sigma^2))

也就是时候收益率R的图形是一个正态分布的图形，假设初始本金为：

![](http://latex.codecogs.com/svg.latex?W_0)

那么到期后的收益：
![](http://latex.codecogs.com/svg.latex?W=W_0(1+R))

其中净收益为：
![](http://latex.codecogs.com/svg.latex?W-W_0)

因此其收益显然也是符合正态分布。

![收益率分布图和VaR的一般计算](http://7viihf.com1.z0.glb.clouddn.com/Rplot3.png)

从图中我们能看到，在x=-0.02处我们视为5%的发生率（假设），所以可以我们能看到计算的VaR值的区域，所以VaR就是计算该区域的值。

计算VaR的方法有多种，一般可以通过以下几种方法计算：

+ 局部估值法和完全估值法
+ 德尔塔-正态法
+ 历史模拟法
+ 蒙特卡罗模拟法

测量VaR有多种方法，一般其比较如下：

特征     | 德尔塔-正态     | 历史模拟       | 蒙特卡洛模拟
------- | :------------- | :----------- | :----------
估值     | 线性           | 完全          | 完全
形状     | 正态           | 真实          | 一般都可以
是否随时间变化 | 是        | 可能          | 是
隐含的数据   | 可能        |没有           |可能
极端事件的反应 |以低概率反映 | 在最近数据中反映  | 可能反映
相关系数的使用 | 是        | 是             | 是
VaR的精确性   | 极好      |用短期窗口时较低   |大量迭代时精确度好
是否容易计算  | 是         | 是             | 否
定价的精确性  | 取决于投资组合 | 是           | 是
可解释性     | 容易         | 容易          | 困难
VaR分析     | 容易分析      | 比较困难       | 比较困难
主要缺点     | 非线性、后尾  |风险随时间变化、异常事件  | 模型分析

###  二、蒙特卡洛模拟

蒙特卡洛模拟算是一种数值分析方法，



